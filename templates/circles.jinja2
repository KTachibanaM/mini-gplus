{% from "_header.jinja2" import header %}
{% from "_form.jinja2" import field %}

<html>
<head>
    <title>Circles | mini-gplus</title>
</head>
<body>
<nav>
    {{ header('/circles') }} | Hi {{ current_user.user_id }} <a href="/signout">Signout</a>
</nav>
<form method='post'>
    {{ field(form.name) }}
    <input type='submit' value='Create new circle'>
</form>
<ul>
    {% for circle in circles %}
        <li>
            <form method="post" action="/rmcircle" style="display: inline">
                {{ circle.name }}
                <input type="hidden" name="id" value="{{ circle.id }}" readonly>
                <input type="submit" value="Remove circle">
                <ul>
                    {% for member in circle.members %}
                        <li><a href="/profile/{{ member.id }}">{{ member.user_id }}</a></li>
                    {% endfor %}
                </ul>
            </form>
        </li>
    {% endfor %}
</ul>
</body>
</html>